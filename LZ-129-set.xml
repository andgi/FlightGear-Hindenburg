<?xml version="1.0"?>
<!-- $Id: LZ-129-set.xml,v 1.6 2006-04-18 22:23:36 anders Exp $ -->
<!--
  LZ-129 Hindenburg

  Copyright (C) 2006  Anders Gidenstam  (anders(at)gidenstam.org)
  This file is licensed under the GPL license.
-->
<PropertyList include="LZ-129-common.xml">

 <sim>

  <description>LZ-129 Hindenburg (using the experimental LTA JSBSim FDM)</description>

  <flight-model>jsb</flight-model>
  <aero>LZ-129</aero>

  <presets>
   <onground>true</onground>
  </presets>
<!--
  <presets>
   <onground>false</onground>
   <speed-set>knots</speed-set>
   <airspeed-kt type="double">0.0</airspeed-kt>
   <altitude-ft type="double">200.0</altitude-ft>
  </presets>
-->
 </sim>

 <!-- Temporary solution. -->
 <sound>
  <audible>true</audible>
  <path>Aircraft/Boeing314/Sounds/Boeing314-sound.xml</path>
 </sound>

 <nasal>
  <WeighOff>
   <script>
    printgearforce = func {
      gf = getprop("/fdm/jsbsim/forces/fbz-gear-lbs");
      if (gf != 0.0) {
        print("LZ-129jsb-set.xml: Gear force: ",
	      gf,
	      " lbs.");
      }
      settimer(printgearforce,2);
    }

    weighoff = func {
      print("LZ-129jsb-set.xml: Weigh-off to 10% in progress.");
      slugtolb = 32.174049;
      lbtoslug = 1.0/slugtolb;
      gf = getprop("/fdm/jsbsim/forces/fbz-gear-lbs");
      cont = getprop("/fdm/jsbsim/propulsion/ballast-tank[2]/contents-slug");
      interpolate("/fdm/jsbsim/propulsion/ballast-tank[2]/contents-slug",
                  cont + 0.90 * gf * lbtoslug,
                  10);
    }

    init = func {
      settimer(printgearforce,2);
    }
    init();
   </script>
  </WeighOff>
 </nasal>

 <input>
  <keyboard>
   <!-- Keyboard commands -->

   <!-- Ballast commands ====================================== -->
   <key n="87"> 
    <name>W</name>
    <desc>Perform on-ground weigh-off.</desc>
    <binding> 
     <command>nasal</command>
     <script>
      WeighOff.weighoff();
     </script>     
    </binding>
   </key>
   <key n="100">
    <name>d</name>
    <desc>Drop 0.1% ballast aft</desc>
    <repeatable type="bool">true</repeatable>
    <binding>
     <command>nasal</command>
     <script>
       print("LZ-129jsb-set.xml: Dropping ballast aft!");
       setprop("/fdm/jsbsim/propulsion/ballast-tank[1]/contents-slug",
	       0.999 *
	       getprop("/fdm/jsbsim/propulsion/ballast-tank[1]/contents-slug"));
       print("Ballast left: ",
             getprop("/fdm/jsbsim/propulsion/ballast-tank[1]/contents-slug"),
	     " slug");
     </script>
    </binding>
   </key>
   <key n="68">
    <name>D</name>
    <desc>Drop 1% ballast aft</desc>
    <repeatable type="bool">true</repeatable>
    <binding>
     <command>nasal</command>
     <script>
       print("LZ-129jsb-set.xml: Dropping ballast aft!");
       setprop("/fdm/jsbsim/propulsion/ballast-tank[1]/contents-slug",
	       0.99 *
	       getprop("/fdm/jsbsim/propulsion/ballast-tank[1]/contents-slug"));
       print("Ballast left: ",
             getprop("/fdm/jsbsim/propulsion/ballast-tank[1]/contents-slug"),
	     " slug");
     </script>
    </binding>
   </key>
   <key n="115">
    <name>s</name>
    <desc>Drop 0.1% ballast fore</desc>
    <repeatable type="bool">true</repeatable>
    <binding>
     <command>nasal</command>
     <script>
       print("LZ-129jsb-set.xml: Dropping ballast fore!");
       setprop("/fdm/jsbsim/propulsion/ballast-tank/contents-slug",
	       0.999 *
	       getprop("/fdm/jsbsim/propulsion/ballast-tank/contents-slug"));
       print("Ballast left: ",
             getprop("/fdm/jsbsim/propulsion/ballast-tank/contents-slug"),
	     " slug");
     </script>
    </binding>
   </key>
   <key n="83">
    <name>S</name>
    <desc>Drop 1% ballast fore</desc>
    <repeatable type="bool">true</repeatable>
    <binding>
     <command>nasal</command>
     <script>
       print("LZ-129jsb-set.xml: Dropping ballast fore!");
       setprop("/fdm/jsbsim/propulsion/ballast-tank/contents-slug",
	       0.99 *
	       getprop("/fdm/jsbsim/propulsion/ballast-tank/contents-slug"));
       print("Ballast left: ",
             getprop("/fdm/jsbsim/propulsion/ballast-tank/contents-slug"),
	     " slug");
     </script>
    </binding>
   </key>
   
   <!-- Gas cell commands ====================================== -->
   <key n="70">
    <name>F</name>
    <desc>Open forward gas valves.</desc>
    <binding>
     <command>nasal</command>
     <script>
       print("LZ-129jsb-set.xml: Forward gas valves open!");
       setprop("/fdm/jsbsim/propulsion/gas-cell[15]/valve_open",
               1.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[14]/valve_open",
               1.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[13]/valve_open",
               1.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[12]/valve_open",
               1.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[11]/valve_open",
               1.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[10]/valve_open",
               1.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[9]/valve_open",
               1.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[8]/valve_open",
               1.00);
     </script>
    </binding>
   </key>
   <key n="102">
    <name>f</name>
    <desc>Close forward gas valves.</desc>
    <binding>
     <command>nasal</command>
     <script>
       print("LZ-129jsb-set.xml: Forward gas valves closed!");
       setprop("/fdm/jsbsim/propulsion/gas-cell[15]/valve_open",
               0.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[14]/valve_open",
               0.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[13]/valve_open",
               0.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[12]/valve_open",
               0.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[11]/valve_open",
               0.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[10]/valve_open",
               0.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[9]/valve_open",
               0.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[8]/valve_open",
               0.00);
     </script>
    </binding>
   </key>

   <key n="71">
    <name>G</name>
    <desc>Open aft gas valves.</desc>
    <binding>
     <command>nasal</command>
     <script>
       print("LZ-129jsb-set.xml: Aft gas valves open!");
       setprop("/fdm/jsbsim/propulsion/gas-cell[7]/valve_open",
               1.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[6]/valve_open",
               1.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[5]/valve_open",
               1.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[4]/valve_open",
               1.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[3]/valve_open",
               1.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[2]/valve_open",
               1.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[1]/valve_open",
               1.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell/valve_open",
               1.00);
     </script>
    </binding>
   </key>
   <key n="103">
    <name>g</name>
    <desc>Close aft gas valves.</desc>
    <binding>
     <command>nasal</command>
     <script>
       print("LZ-129jsb-set.xml: Aft gas valves closed!");
       setprop("/fdm/jsbsim/propulsion/gas-cell[7]/valve_open",
               0.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[6]/valve_open",
               0.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[5]/valve_open",
               0.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[4]/valve_open",
               0.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[3]/valve_open",
               0.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[2]/valve_open",
               0.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell[1]/valve_open",
               0.00);
       setprop("/fdm/jsbsim/propulsion/gas-cell/valve_open",
               0.00);
     </script>
    </binding>
   </key>

  </keyboard>
 </input>

</PropertyList>
